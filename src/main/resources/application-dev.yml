spring:
  datasource:
    url: jdbc:postgresql://localhost:5433/qa_framework
    username: qauser
    password: qapass
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 20000

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  data:
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

# Local file storage configuration
storage:
  type: local
  base-path: ${user.home}/qa-framework/artifacts
  screenshots: ${storage.base-path}/screenshots
  videos: ${storage.base-path}/videos
  logs: ${storage.base-path}/logs
  reports: ${storage.base-path}/reports
  retention-days: 30
  max-file-size-mb: 10
  allowed-extensions:
    - png
    - jpg
    - jpeg
    - txt
    - log
    - html
    - json
    - mp4
  cleanup:
    enabled: true
    schedule: "0 0 2 * * *"

# Selenium configuration
selenium:
  grid-url: http://localhost:4444/wd/hub
  implicit-wait: 10
  page-load-timeout: 30

#logging:
  #level:
   # com.company.qa: DEBUG
    #org.hibernate.SQL: DEBUG

# Add to existing application-dev.yml

# Security configuration
security:
  api-key:
    header-name: X-API-Key
    rate-limit:
      enabled: true
      requests-per-minute: 100
    logging:
      enabled: true

logging:
  level:
    root: INFO
    com.company.qa: DEBUG
    com.company.qa.security: DEBUG  # ADD THIS
    org.springframework.security: DEBUG  # ADD THIS (for troubleshooting)

execution:
  timeout-minutes: 10
  max-concurrent: 3
  retry:
    enabled: true
    max-attempts: 2
    delay-seconds: 5
    retry-on-timeout: true
    retry-on-network-error: true
    retry-on-assertion-failure: false


  datasource:
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 60000  # ADD THIS - detect leaks

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,hikaricp  # ADD hikaricp
  metrics:
    export:
      prometheus:
        enabled: true